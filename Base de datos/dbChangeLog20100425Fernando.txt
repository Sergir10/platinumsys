
/***************************************

alter table inventario_cabecera drop column cod_empleado
/
alter table inventario_cabecera drop constraint "INVENTARIO_CABECERA_EMPLEADO"
/
alter table "COSTOS_FIJOS" add "COD_ORDEN_TRABAJO" number
/   
alter table "COSTOS_FIJOS" drop column "COD_ORDEN_TRABAJO_DET" 
/
alter table "COSTOS_FIJOS" drop constraint "COSTOS_FIJOS_OT_DET_FK"
/

****************************************/



alter table "INVENTARIO_DETALLE" drop constraint
"INVENTARIO_PRODUCTO_UK"
/

alter table inventario_cabecera add cod_empleado number(7)
/

alter table inventario_cabecera add
 CONSTRAINT "INVENTARIO_CABECERA_EMPLEADO" FOREIGN KEY ("COD_EMPLEADO")
	  REFERENCES  "EMPLEADO" ("COD_EMPLEADO")
/

CREATE TABLE  "ORDEN_TRABAJO_DET_COSTO_H" 
   (	"COD_ORDEN_TRAB_DET_HORAS" NUMBER, 
	"COD_ORDEN_TRABAJO_DET" NUMBER, 
	"COD_EMPLEADO" NUMBER, 
	"CANTIDAD_HORAS" NUMBER, 
	"COSTO_HORA" NUMBER, 
	"COSTO_TOTAL" NUMBER, 
	 CONSTRAINT "ORDEN_TRABAJO_DET_COSTO_H_PK" PRIMARY KEY ("COD_ORDEN_TRAB_DET_HORAS") ENABLE, 
	 CONSTRAINT "ORDEN_TRABAJO_DET_HORA_DET" FOREIGN KEY ("COD_ORDEN_TRABAJO_DET")
	  REFERENCES  "ORDEN_TRABAJO_DETALLE" ("COD_ORDEN_TRABAJO_DET") ENABLE, 
	 CONSTRAINT "ORDEN_TRABAJO_DET_HORA_EMP" FOREIGN KEY ("COD_EMPLEADO")
	  REFERENCES  "EMPLEADO" ("COD_EMPLEADO") ENABLE
   )
/

CREATE SEQUENCE   "SQ_ORDEN_TRAB_DET_COSTO_HOR"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER  NOCYCLE
/

CREATE table "ORDEN_TRABAJO_DET_COSTO_MAT" (
    "COD_ORDEN_TRAB_DET_MAT" NUMBER,
    "COD_ORDEN_TRABAJO_DET"  NUMBER,
    "COD_PRODUCTO"           NUMBER,
    "CANTIDAD"               NUMBER,
    "COSTO_UNITARIO"         NUMBER,
    "COSTO_TOTAL"            NUMBER,
    constraint  "ORDEN_TRABAJO_DET_COSTO_MAT_PK" primary key ("COD_ORDEN_TRAB_DET_MAT")
)
/

CREATE sequence "SQ_ORDEN_TRABAJO_DET_COSTO_M" 
/

ALTER TABLE "ORDEN_TRABAJO_DET_COSTO_MAT" ADD CONSTRAINT "ORDEN_TRAB_DET_COSTO_DET" 
FOREIGN KEY ("COD_ORDEN_TRABAJO_DET")
REFERENCES "ORDEN_TRABAJO_DETALLE" ("COD_ORDEN_TRABAJO_DET")

/

ALTER TABLE "ORDEN_TRABAJO_DET_COSTO_MAT" ADD CONSTRAINT "ORDEN_TRAB_DET_COSTO_PROD" 
FOREIGN KEY ("COD_PRODUCTO")
REFERENCES "PRODUCTO" ("COD_PRODUCTO")
/

alter table "COSTOS_FIJOS" drop constraint
"COSTOS_FIJOS_OT_FK"
/   

alter table "COSTOS_FIJOS" drop column
"COD_ORDEN_TRABAJO"
/   

alter table "COSTOS_FIJOS" ADD "COD_ORDEN_TRABAJO_DET" NUMBER
/

alter table "COSTOS_FIJOS" add constraint
"COSTOS_FIJOS_OT_DET_FK" foreign key ("COD_ORDEN_TRABAJO_DET") references "ORDEN_TRABAJO_DETALLE" ("COD_ORDEN_TRABAJO_DET")
/   
